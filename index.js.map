{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImagesByQuery(query, page) {\n    try {\n        const res = await axios.get(\"https://pixabay.com/api/\", {\n            params: {\n                key: \"52839812-b4c86bdfff86c9a3d984b9ce5\",\n                q: query,\n                page: page,\n                per_page: 15,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true\n            }\n        })\n        return {\n            hits: res.data.hits,\n            totalHits: res.data.totalHits\n        };\n    } catch (err) {\n        console.error(\"API error:\", err.message);\n        throw err;\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nlet sl = new SimpleLightbox('.gallery a', {\n    sourceAttr: 'href',\n    overlay: true,\n    overlayOpacity: 0.9,\n    spinner: true,\n    nav: true,\n    navText: ['<', '>'],\n    captions: true,\n    captionsData: 'alt',\n    captionSelector: 'img',\n    captionDelay: 150,\n    showCounter: true,\n    scrollZoom: true,\n    close: true,\n});\n\nconst loader = document.querySelector('#loader')\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector(\"#loadBtn\")\n\n\n\nfunction createGallery(images, position) {\n    gallery.insertAdjacentHTML(position, createCardsMarkup(images));\n    sl.refresh();\n}\n\nfunction clearGallery() {\n    gallery.innerHTML = '';\n}\n\nfunction showLoader() {\n    loader.classList.remove('visually-hidden')\n}\n\nfunction hideLoader() {\n    loader.classList.add('visually-hidden')\n}\n\nfunction showLoadMoreButton() {\n    loadBtn.classList.remove('visually-hidden')\n}\n\nfunction hideLoadMoreButton() {\n    loadBtn.classList.add('visually-hidden')\n}\n\nexport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton, loadBtn, showError, gallery };\n\n\nfunction createCardsMarkup(array) {\n    return array.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"gall-item\">\n        <a class=\"gall-pic\" href=\"${largeImageURL}\">\n            <img\n                width=\"360\"\n                height=\"200\"\n                class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n            />\n        </a>\n        <ul class=\"gall-descr\">\n            <li class=\"gall-descr-item\">Likes: ${likes}</li>\n            <li class=\"gall-descr-item\">Views: ${views}</li>\n            <li class=\"gall-descr-item\">Comments: ${comments}</li>\n            <li class=\"gall-descr-item\">Downloads: ${downloads}</li>\n        </ul>\n    </li>`).join('\\n')\n}\n\n\nfunction showError(message) {\n    iziToast.error({\n        position: 'topRight',\n        message,\n    });\n}\n","import { getImagesByQuery } from './js/pixabay-api.js';\n\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n    showError,\n    loadBtn,\n    gallery\n} from './js/render-functions.js';\n\nconst searchInput = document.querySelector(\"#searchInput\")\nconst searchBtn = document.querySelector(\"#searchBtn\")\n\nlet page = 1\nlet currentQuery = ''\nlet totalLoaded = 0\nlet totalHits = 0\n\nsearchBtn.addEventListener('click', async (e) => {\n    e.preventDefault()\n\n    currentQuery = searchInput.value.trim()\n\n    if (!currentQuery) {\n        return showError('Please enter a search query!')\n    }\n\n    page = 1\n    totalLoaded = 0\n\n    clearGallery()\n    hideLoadMoreButton()\n    showLoader()\n\n    try {\n        const { hits, totalHits } = await getImagesByQuery(currentQuery, page)\n\n        if (!hits || hits.length === 0) {\n            hideLoadMoreButton()\n            return showError('Sorry, there are no images matching your search query. Please try again!')\n        };\n        createGallery(hits, 'afterbegin')\n\n        totalLoaded = hits.length\n\n        if (totalLoaded < totalHits) {\n            showLoadMoreButton()\n        } else {\n            hideLoadMoreButton()\n        }\n\n    } catch (err) {\n        console.log(err.message);\n    }\n    finally {\n        hideLoader()\n    }\n})\n\nloadBtn.addEventListener('click', async (e) => {\n    e.preventDefault()\n\n    showLoader()\n\n    try {\n        const { hits, totalHits } = await getImagesByQuery(currentQuery, page += 1)\n\n        totalLoaded += hits.length\n\n        createGallery(hits, 'beforeend')\n\n        if (totalLoaded < totalHits) {\n            showLoadMoreButton()\n        } else {\n            hideLoadMoreButton()\n            showError('We are sorry, but you have reached the end of search results.')\n        }\n\n        const firstCard = gallery.querySelector('.gall-item');\n        if (firstCard) {\n            const cardHeight = firstCard.getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth'\n            });\n        }\n\n    } catch (err) {\n        console.log(err.message);\n    }\n    finally {\n        hideLoader()\n    }\n})"],"names":["getImagesByQuery","query","page","res","axios","err","sl","SimpleLightbox","loader","gallery","loadBtn","createGallery","images","position","createCardsMarkup","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","array","largeImageURL","webformatURL","tags","likes","views","comments","downloads","showError","message","iziToast","searchInput","searchBtn","currentQuery","totalLoaded","e","hits","totalHits","firstCard","cardHeight"],"mappings":"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"}